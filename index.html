<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>GymShop</title>
  <style>
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; margin:0; background:#f8fafc; color:#0f172a; }
    header { display:flex; justify-content:space-between; align-items:center; padding:16px; background:#0f172a; color:white; }
    .brand { font-weight:900; }
    nav a { color:white; margin-left:12px; text-decoration:none; }
    main { max-width:1000px; margin:0 auto; padding:20px; }
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px; }
    .card { border:1px solid #e2e8f0; border-radius:12px; padding:12px; background:white; cursor:pointer }
    .price { font-weight:900; font-size:18px; }
    .small { font-size:12px; color:#64748b; }
    .img { height:160px; background:#e2e8f0; border-radius:10px; margin-bottom:8px; display:flex; align-items:center; justify-content:center; overflow:hidden }
    .img img { width:100%; height:100%; object-fit:cover }

    /* Modal */
    .modal { position:fixed; inset:0; background:rgba(2,6,23,.75); display:none; align-items:center; justify-content:center; padding:16px; z-index:50 }
    .modal.open { display:flex }
    .box { width:min(1000px,100%); background:#fff; color:#0f172a; border-radius:16px; overflow:hidden; display:grid; grid-template-columns:1.2fr 1fr; border:1px solid #e2e8f0 }
    @media (max-width:900px){ .box { grid-template-columns:1fr } }
    .gal { position:relative; padding:12px; border-right:1px solid #e2e8f0 }
    .hero { height:420px; background:#f1f5f9; border-radius:12px; border:1px solid #e2e8f0; display:flex; align-items:center; justify-content:center; overflow:hidden }
    .hero img { width:100%; height:100%; object-fit:contain }
    .thumbs { margin-top:8px; display:flex; gap:8px; overflow-x:auto; padding-bottom:8px }
    .thumbs img { width:80px; height:80px; border-radius:10px; border:1px solid #e2e8f0; object-fit:cover; opacity:.9; cursor:pointer }
    .thumbs img.active { outline:2px solid #22c55e; opacity:1 }
    .nav { position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; pointer-events:none }
    .nav button { pointer-events:auto; all:unset; cursor:pointer; background:#00000066; color:#fff; padding:8px 10px; border-radius:10px; margin:8px }

    .info { padding:16px; display:flex; flex-direction:column; gap:8px }
    .x { all:unset; cursor:pointer; position:absolute; top:8px; right:10px; background:#00000066; color:#fff; padding:8px 10px; border-radius:10px }
    .title { font-size:22px; font-weight:800; margin:0 }
    .sku { font-size:12px; color:#64748b }
    .priceBig { font-weight:900; font-size:24px }
    .btn { padding:10px 14px; border:1px solid #e2e8f0; border-radius:999px; background:#0f172a; color:#fff; cursor:pointer }
    .btn.secondary { background:#fff; color:#0f172a }
    .badges { display:flex; gap:8px; flex-wrap:wrap }
    .badge { border:1px solid #e2e8f0; border-radius:999px; padding:6px 10px; color:#475569; font-size:12px }
    .notice { font-size:12px; color:#475569 }
  </style>
</head>
<body>
  <header>
    <div class="brand">GYMCO.MA</div>
    <nav>
      <a href="#">Catalog</a>
      <a href="#">Panier</a>
      <a href="admin.html">Admin</a>
    </nav>
  </header>

  <main>
    <h1>Bienvenue ðŸ‘‹</h1>
    <p>Articles de gym avec paiement Ã  la livraison (DH).</p>

    <!-- PRODUCTS GRID -->
    <div id="grid" class="grid"></div>
    <p class="notice">Cliquez un produit pour voir les 5 images et ajouter au panier.</p>
  </main>

  <!-- MODAL -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Produit">
    <div class="box">
      <button class="x" id="closeModal" aria-label="Fermer">âœ•</button>

      <section class="gal">
        <div class="hero"><img id="heroImg" alt="Image produit" /></div>
        <div class="nav">
          <button id="prev" aria-label="PrÃ©cÃ©dent">â—€</button>
          <button id="next" aria-label="Suivant">â–¶</button>
        </div>
        <div class="thumbs" id="thumbs"></div>
      </section>

      <section class="info">
        <h2 class="title" id="mTitle"></h2>
        <div class="sku" id="mSku"></div>
        <div class="priceBig" id="mPrice"></div>
        <p id="mDesc"></p>
        <div class="badges">
          <span class="badge">Livraison 24â€“72h</span>
          <span class="badge">Retour 30 jours</span>
          <span class="badge">Paiement Ã  la livraison</span>
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" id="addToCart">Ajouter au panier</button>
          <button class="btn secondary" id="buyNow">Commander maintenant</button>
        </div>
        <div class="notice">Nous appelons pour confirmer avant expÃ©dition.</div>
      </section>
    </div>
  </div>

  <script>
    // -------- Demo products (edit these for your catalog) --------
    const products = [
      {
        id: 'TEE-DRY-001',
        name: 'T-shirt Dry-Fit Homme',
        price: 149, currency: 'DH',
        cover: 'https://picsum.photos/seed/tee1/600/400',
        images: [
          'https://picsum.photos/seed/tee1/1000/700',
          'https://picsum.photos/seed/tee12/1000/700',
          'https://picsum.photos/seed/tee13/1000/700',
          'https://picsum.photos/seed/tee14/1000/700',
          'https://picsum.photos/seed/tee15/1000/700',
        ],
        desc: "Respirant, sÃ©chage rapide pour l'entraÃ®nement."
      },
      {
        id: 'LEGG-FEM-002',
        name: 'Leggings Yoga Femme',
        price: 199, currency: 'DH',
        cover: 'https://picsum.photos/seed/legg/600/400',
        images: [
          'https://picsum.photos/seed/legg1/1000/700',
          'https://picsum.photos/seed/legg2/1000/700',
          'https://picsum.photos/seed/legg3/1000/700',
          'https://picsum.photos/seed/legg4/1000/700',
          'https://picsum.photos/seed/legg5/1000/700',
        ],
        desc: 'Extensible, maintien optimal pour yoga/fitness.'
      },
      {
        id: 'DB-ADJ-020',
        name: 'HaltÃ¨res Ajustables 20â€“40kg',
        price: 1499, currency: 'DH',
        cover: 'https://picsum.photos/seed/db/600/400',
        images: [
          'https://picsum.photos/seed/db1/1000/700',
          'https://picsum.photos/seed/db2/1000/700',
          'https://picsum.photos/seed/db3/1000/700',
          'https://picsum.photos/seed/db4/1000/700',
          'https://picsum.photos/seed/db5/1000/700',
        ],
        desc: 'Gain de place, changement de poids rapide.'
      }
    ];

    // -------- Cart (localStorage demo) --------
    function getCart(){ return JSON.parse(localStorage.getItem('cart')||'[]'); }
    function setCart(c){ localStorage.setItem('cart', JSON.stringify(c)); }
    function addItem(p){
      const cart = getCart();
      const ex = cart.find(x=>x.id===p.id);
      if (ex) ex.qty = (ex.qty||1)+1; else cart.push({ id:p.id, name:p.name, price:p.price, currency:p.currency, qty:1 });
      setCart(cart);
      alert('AjoutÃ© au panier');
    }

    // -------- Render grid --------
    const $grid = document.getElementById('grid');
    $grid.innerHTML = products.map(p => `
      <article class="card" data-id="${p.id}">
        <div class="img"><img src="${p.cover}" alt="${p.name}"></div>
        <div class="small">ID: ${p.id}</div>
        <div style="font-weight:700">${p.name}</div>
        <div class="price">${p.price.toLocaleString('fr-MA')} ${p.currency}</div>
      </article>
    `).join('');

    // -------- Modal logic --------
    const $modal = document.getElementById('modal');
    const $heroImg = document.getElementById('heroImg');
    const $thumbs = document.getElementById('thumbs');
    const $mTitle = document.getElementById('mTitle');
    const $mSku = document.getElementById('mSku');
    const $mPrice = document.getElementById('mPrice');
    const $mDesc = document.getElementById('mDesc');
    const $close = document.getElementById('closeModal');
    const $add = document.getElementById('addToCart');
    const $buy = document.getElementById('buyNow');
    const $prev = document.getElementById('prev');
    const $next = document.getElementById('next');

    let current = null; // product
    let idx = 0;        // image index

    function openModal(p){
      current = p; idx = 0;
      $mTitle.textContent = p.name;
      $mSku.textContent = 'ID: ' + p.id;
      $mPrice.textContent = p.price.toLocaleString('fr-MA') + ' ' + p.currency;
      $mDesc.textContent = p.desc || '';
      renderGallery();
      $modal.classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    function closeModal(){
      $modal.classList.remove('open');
      document.body.style.overflow = 'auto';
    }
    function renderGallery(){
      const imgs = current.images?.length ? current.images : [current.cover];
      idx = Math.max(0, Math.min(idx, imgs.length-1));
      $heroImg.src = imgs[idx];
      $heroImg.alt = `${current.name} â€“ image ${idx+1}`;
      $thumbs.innerHTML = imgs.map((src,i)=>`<img src="${src}" alt="miniature ${i+1}" data-i="${i}" class="${i===idx?'active':''}">`).join('');
    }

    // open
    $grid.addEventListener('click', e=>{
      const card = e.target.closest('.card'); if (!card) return;
      const id = card.getAttribute('data-id');
      const p = products.find(x=>x.id===id);
      if (p) openModal(p);
    });
    // close
    $close.addEventListener('click', closeModal);
    $modal.addEventListener('click', e=>{ if (e.target === $modal) closeModal(); });
    document.addEventListener('keydown', e=>{ if (e.key==='Escape') closeModal(); });

    // thumbs
    $thumbs.addEventListener('click', e=>{
      const im = e.target.closest('img'); if (!im) return;
      idx = Number(im.dataset.i)||0; renderGallery();
    });

    // arrows
    $prev.addEventListener('click', ()=>{ idx = (idx-1+current.images.length)%current.images.length; renderGallery(); });
    $next.addEventListener('click', ()=>{ idx = (idx+1)%current.images.length; renderGallery(); });

    // swipe on hero (mobile)
    let startX=null;
    $heroImg.addEventListener('touchstart', e=>{ startX = e.touches[0].clientX; });
    $heroImg.addEventListener('touchend', e=>{
      if (startX===null) return; const dx = e.changedTouches[0].clientX - startX; startX=null;
      if (Math.abs(dx)<40) return; if (dx>0) $prev.click(); else $next.click();
    });

    // actions
    $add.addEventListener('click', ()=>{ if (current) addItem(current); });
    $buy.addEventListener('click', ()=>{ if (current) { addItem(current); alert('Passer Ã  la commande (Ã  faire)'); } });
  </script>
</body>
</html>
